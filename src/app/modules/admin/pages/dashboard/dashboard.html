<div class="admin-banner">
  <div class="banner-content">
    <h1>PANEL DE ADMINISTRACIÃ“N</h1>
    <p>GESTIÃ“N DE PROGRAMADORES Y DISPONIBILIDAD</p>
  </div>
</div>

<div class="admin-canvas">
  <div class="admin-card">
    <!-- menÃº -->
    <div class="menu-admin">
      <button (click)="vista = 'crear'" [class.activo]="vista === 'crear'">
        âž• Crear Programador
      </button>

      <button (click)="vista = 'lista'" [class.activo]="vista === 'lista'">ðŸ“‹ Programadores</button>

      <button (click)="vista = 'horarios'" [class.activo]="vista === 'horarios'">
        ðŸ•’ Horarios
      </button>
    </div>

    <!-- CREAR -->
    <div *ngIf="vista === 'crear'" class="seccion">
      <h2>Registrar Nuevo Programador</h2>

      <form (ngSubmit)="crearProgramador()">
        <label>Nombre completo</label>
        <input type="text" [(ngModel)]="nuevoProgramador.name" name="name" required />

        <label>Correo</label>
        <input type="email" [(ngModel)]="nuevoProgramador.email" name="email" required />

        <label>Especialidad</label>
        <input type="text" [(ngModel)]="nuevoProgramador.specialty" name="specialty" required />

        <button class="btn-primary" type="submit">Crear Programador</button>
      </form>
    </div>

    <!-- LISTA -->
    <div *ngIf="vista === 'lista'" class="seccion">
      <h2>Programadores Registrados</h2>

      <div *ngFor="let p of programadores" class="tarjeta">
        <!-- ðŸ”‘ USAR NOMBRES DEL BACKEND -->
        <h3>{{ p.nombre }}</h3>
        <p><strong>Email:</strong> {{ p.email }}</p>
        <p><strong>Especialidad:</strong> {{ p.especialidad || 'Sin especialidad' }}</p>

        <div class="acciones">
          <button class="btn-editar" (click)="editarProgramador(p)">Editar</button>
          <button class="btn-eliminar" (click)="eliminarProgramador(p.id)">Eliminar</button>
        </div>
      </div>
    </div>

    <!-- EDITAR -->
    <div *ngIf="vista === 'editar'" class="seccion">
      <h2>Editar Programador</h2>

      <form (ngSubmit)="actualizarProgramador()">
        <label>Nombre</label>
        <!-- ðŸ”‘ BACKEND -->
        <input type="text" [(ngModel)]="programadorEditando.nombre" name="editNombre" required />

        <label>Correo</label>
        <input type="email" [(ngModel)]="programadorEditando.email" name="editEmail" required />

        <label>Especialidad</label>
        <input
          type="text"
          [(ngModel)]="programadorEditando.especialidad"
          name="editEspecialidad"
          required
        />

        <button class="btn-primary" type="submit">Guardar Cambios</button>
        <button class="btn-secundario" type="button" (click)="vista = 'lista'">Cancelar</button>
      </form>
    </div>

    <!-- HORARIOS -->
    <div *ngIf="vista === 'horarios'" class="seccion">
      <h2>Horarios de Disponibilidad</h2>

      <label>Seleccionar Programador</label>
      <select [(ngModel)]="programadorSeleccionado" (change)="cambiarProgramador()" class="select">
        <option [ngValue]="null">-- Seleccionar programador --</option>
        <option *ngFor="let p of programadores" [ngValue]="p">
          {{ p.nombre }}
        </option>
      </select>

      <div *ngIf="programadorSeleccionado" class="horarios">
        <h3>Horario de {{ programadorSeleccionado.nombre }}</h3>

        <label>DÃ­a</label>
        <select [(ngModel)]="nuevoHorario.dia" name="dia">
          <option>Lunes</option>
          <option>Martes</option>
          <option>MiÃ©rcoles</option>
          <option>Jueves</option>
          <option>Viernes</option>
          <option>SÃ¡bado</option>
        </select>

        <div class="grid-2">
          <div>
            <label>Hora Inicio</label>
            <input type="time" [(ngModel)]="nuevoHorario.horaInicio" name="inicio" />
          </div>

          <div>
            <label>Hora Fin</label>
            <input type="time" [(ngModel)]="nuevoHorario.horaFin" name="fin" />
          </div>
        </div>

        <button class="btn-primary" (click)="guardarHorario()">Agregar horario</button>

        <h3>Horarios Registrados</h3>
        <ul class="lista-horarios">
          <li *ngFor="let h of horariosProgramador">
            {{ h.dia }} â€” {{ h.horaInicio }} a {{ h.horaFin }}

            <div class="acciones">
              <button class="btn-editar" (click)="editarHorario(h)">Editar</button>
              <button class="btn-eliminar" (click)="eliminarHorarioConfirmado(h.id)">
                Eliminar
              </button>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- MODAL MENSAJE -->
<div class="overlay" *ngIf="mostrarModalMensaje">
  <div class="confirm-modal animate">
    <h2>NotificaciÃ³n</h2>
    <p>{{ mensajeModal }}</p>
    <button class="close-btn" (click)="mostrarModalMensaje = false">Cerrar</button>
  </div>
</div>

<!-- MODAL CONFIRMACIÃ“N -->
<div class="overlay" *ngIf="mostrarModalConfirmacion">
  <div class="confirm-modal animate">
    <h2>âš  ConfirmaciÃ³n</h2>
    <p>{{ mensajeModal }}</p>

    <div class="btn-row">
      <button class="close-btn cancel" (click)="cancelarAccion()">Cancelar</button>
      <button class="close-btn confirm" (click)="confirmarAccion()">SÃ­, continuar</button>
    </div>
  </div>
</div>
