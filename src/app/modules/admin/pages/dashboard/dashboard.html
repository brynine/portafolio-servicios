<div class="admin-banner">
  <!-- encabezado visual del panel -->
  <div class="banner-content">
    <h1>PANEL DE ADMINISTRACIÃ“N</h1>
    <p>GESTIÃ“N DE PROGRAMADORES Y DISPONIBILIDAD</p>
  </div>
</div>

<div class="admin-canvas">
  <div class="admin-card">
    <!-- menÃº para cambiar entre las vistas -->
    <div class="menu-admin">
      <button (click)="vista = 'crear'" [class.activo]="vista === 'crear'">
        âž• Crear Programador
      </button>
      <button (click)="vista = 'lista'" [class.activo]="vista === 'lista'">ðŸ“‹ Programadores</button>
      <button (click)="vista = 'horarios'" [class.activo]="vista === 'horarios'">
        ðŸ•’ Horarios
      </button>
    </div>

    <!-- vista: registrar nuevo programador -->
    <div *ngIf="vista === 'crear'" class="seccion">
      <h2>Registrar Nuevo Programador</h2>

      <!-- formulario vinculado con ngModel -->
      <form (ngSubmit)="crearProgramador()">
        <label>Nombre completo</label>
        <input type="text" [(ngModel)]="nuevoProgramador.name" name="name" required />

        <label>Correo</label>
        <input type="email" [(ngModel)]="nuevoProgramador.email" name="email" required />

        <label>Especialidad</label>
        <input type="text" [(ngModel)]="nuevoProgramador.specialty" name="specialty" required />

        <button class="btn-primary" type="submit">Crear Programador</button>
      </form>
    </div>

    <!-- vista: lista de programadores -->
    <div *ngIf="vista === 'lista'" class="seccion">
      <h2>Programadores Registrados</h2>

      <!-- recorrido dinÃ¡mico de programadores -->
      <div *ngFor="let p of programadores" class="tarjeta">
        <h3>{{ p.name }}</h3>
        <p><strong>Email:</strong> {{ p.email }}</p>
        <p><strong>Especialidad:</strong> {{ p.specialty }}</p>

        <!-- botones para editar o eliminar -->
        <div class="acciones">
          <button class="btn-editar" (click)="editarProgramador(p)">Editar</button>
          <button class="btn-eliminar" (click)="eliminarProgramador(p.id)">Eliminar</button>
        </div>
      </div>
    </div>

    <!-- vista: ediciÃ³n -->
    <div *ngIf="vista === 'editar'" class="seccion">
      <h2>Editar Programador</h2>

      <form (ngSubmit)="actualizarProgramador()">
        <label>Nombre</label>
        <input type="text" [(ngModel)]="programadorEditando.name" name="editName" required />

        <label>Correo</label>
        <input type="email" [(ngModel)]="programadorEditando.email" name="editEmail" required />

        <label>Especialidad</label>
        <input
          type="text"
          [(ngModel)]="programadorEditando.specialty"
          name="editSpecialty"
          required
        />

        <button class="btn-primary" type="submit">Guardar Cambios</button>
        <button class="btn-secundario" type="button" (click)="vista = 'lista'">Cancelar</button>
      </form>
    </div>

    <!-- vista: horarios -->
    <div *ngIf="vista === 'horarios'" class="seccion">
      <h2>Horarios de Disponibilidad</h2>

      <!-- selector del programador -->
      <label>Seleccionar Programador</label>
      <select [(ngModel)]="programadorSeleccionado" (change)="cambiarProgramador()" class="select">
        <option [ngValue]="null">-- Seleccionar programador --</option>
        <option *ngFor="let p of programadores" [ngValue]="p">
          {{ p.name }}
        </option>
      </select>

      <!-- cuando hay programador seleccionado se muestran horarios -->
      <div *ngIf="programadorSeleccionado" class="horarios">
        <h3>Horario de {{ programadorSeleccionado.name }}</h3>

        <!-- formulario para agregar horarios -->
        <label>DÃ­a</label>
        <select [(ngModel)]="nuevoHorario.dia" name="dia">
          <option>Lunes</option>
          <option>Martes</option>
          <option>MiÃ©rcoles</option>
          <option>Jueves</option>
          <option>Viernes</option>
          <option>SÃ¡bado</option>
        </select>

        <div class="grid-2 horarios-grid">
          <div class="horario-item">
            <label>Hora Inicio</label>
            <input type="time" [(ngModel)]="nuevoHorario.horaInicio" name="inicio" />
          </div>

          <div class="horario-item">
            <label>Hora Fin</label>
            <input type="time" [(ngModel)]="nuevoHorario.horaFin" name="fin" />
          </div>
        </div>

        <button class="btn-primary" (click)="guardarHorario()">Agregar horario</button>

        <!-- listado de horarios existentes -->
        <h3>Horarios Registrados</h3>
        <ul class="lista-horarios">
          <li *ngFor="let h of horariosProgramador">
            {{ h.dia }} â€” {{ h.horaInicio }} a {{ h.horaFin }}

            <!-- opciones: editar o eliminar -->
            <div class="acciones">
              <button class="btn-editar" (click)="editarHorario(h)">Editar</button>
              <button class="btn-eliminar" (click)="eliminarHorario(h.id)">Eliminar</button>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- secciÃ³n de ediciÃ³n del horario -->
    <div *ngIf="modoEditarHorario" class="editar-container">
      <h3>Editando Horario</h3>

      <label>DÃ­a</label>
      <select [(ngModel)]="horarioEditando.dia">
        <option>Lunes</option>
        <option>Martes</option>
        <option>MiÃ©rcoles</option>
        <option>Jueves</option>
        <option>Viernes</option>
        <option>SÃ¡bado</option>
      </select>

      <label>Hora Inicio</label>
      <input type="time" [(ngModel)]="horarioEditando.horaInicio" />

      <label>Hora Fin</label>
      <input type="time" [(ngModel)]="horarioEditando.horaFin" />

      <button class="btn-primary" (click)="actualizarHorario()">Guardar</button>
      <button class="btn-secundario" (click)="cancelarEdicionHorario()">Cancelar</button>
    </div>
  </div>
</div>

<!-- modal simple para mensajes -->
<div class="overlay" *ngIf="mostrarModalMensaje">
  <div class="confirm-modal animate">
    <h2>NotificaciÃ³n</h2>
    <p>{{ mensajeModal }}</p>

    <button class="close-btn" (click)="mostrarModalMensaje = false">Cerrar</button>
  </div>
</div>

<!-- modal para confirmaciones -->
<div class="overlay" *ngIf="mostrarModalConfirmacion">
  <div class="confirm-modal animate">
    <h2>âš  ConfirmaciÃ³n</h2>
    <p>{{ mensajeModal }}</p>

    <div class="btn-row">
      <button class="close-btn cancel" (click)="cancelarAccion()">Cancelar</button>
      <button class="close-btn confirm" (click)="confirmarAccion()">SÃ­, continuar</button>
    </div>
  </div>
</div>
