<div class="programador-banner">
  <div class="banner-content">
    <h1>PANEL DEL PROGRAMADOR</h1>
    <p>GESTIONA PROYECTOS, ASESOR√çAS Y TU PERFIL</p>
  </div>
</div>

<div class="programador-canvas">
  <div class="menu-interno">
    <button (click)="vista = 'agregar'" [class.activo]="vista === 'agregar'">
      ‚ûï Agregar Proyecto
    </button>
    <button (click)="vista = 'proyectos'" [class.activo]="vista === 'proyectos'">
      üìÅ Mis Proyectos
    </button>
    <button (click)="vista = 'asesorias'" [class.activo]="vista === 'asesorias'">
      üì¨ Mis Asesor√≠as
    </button>
    <button (click)="vista = 'perfil'" [class.activo]="vista === 'perfil'">üë§ Mi Perfil</button>
  </div>

  <div class="programador-card">
    <div *ngIf="vista === 'agregar'" class="seccion">
      <h3>Agregar nuevo proyecto</h3>

      <form (ngSubmit)="guardarProyecto()" class="formulario">
        <label>Nombre del proyecto</label>
        <input type="text" [(ngModel)]="nuevoProyecto.nombre" name="nombre" required />

        <label>Descripci√≥n</label>
        <textarea [(ngModel)]="nuevoProyecto.descripcion" name="descripcion" required></textarea>

        <div class="doble">
          <div>
            <label>Tipo de proyecto</label>
            <select [(ngModel)]="nuevoProyecto.tipo" name="tipo" required>
              <option value="academico">Acad√©mico</option>
              <option value="laboral">Laboral</option>
            </select>
          </div>

          <div>
            <label>Rol</label>
            <select [(ngModel)]="nuevoProyecto.participacion" name="participacion" required>
              <option value="frontend">Frontend</option>
              <option value="backend">Backend</option>
              <option value="base-datos">Base de datos</option>
            </select>
          </div>
        </div>

        <label>Tecnolog√≠as usadas</label>
        <input
          type="text"
          [(ngModel)]="nuevoProyecto.tecnologias"
          name="tecnologias"
          placeholder="Angular, Firebase, MySQL"
        />

        <label>Repositorio (GitHub)</label>
        <input type="text" [(ngModel)]="nuevoProyecto.repositorio" name="repositorio" />

        <label>URL de despliegue</label>
        <input type="text" [(ngModel)]="nuevoProyecto.deploy" name="deploy" />

        <button type="submit" class="btn-guardar">Guardar proyecto</button>
      </form>
    </div>

    <div *ngIf="vista === 'proyectos'" class="seccion">
      <input
        class="buscador"
        type="text"
        placeholder="Buscar proyecto..."
        [(ngModel)]="filtroProyecto"
        (input)="filtrarProyectos()"
      />

      <div class="tarjeta" *ngFor="let p of proyectosFiltrados">
        <h3>{{ p.nombre }}</h3>
        <p><strong>Tecnolog√≠as:</strong> {{ p.tecnologias }}</p>
        <p>{{ p.descripcion }}</p>

        <div class="acciones">
          <button (click)="editarProyecto(p)">Editar</button>
          <button (click)="eliminarProyecto(p.id)">Eliminar</button>
        </div>
      </div>
    </div>

    <div *ngIf="vista === 'asesorias'" class="seccion">
      <h3>Solicitudes de Asesor√≠a</h3>

      <div *ngIf="asesorias.length === 0">No tienes solicitudes a√∫n</div>

      <div class="tarjeta" *ngFor="let a of asesorias">
        <p><strong>Fecha:</strong> {{ a.fecha }}</p>
        <p><strong>Usuario:</strong> {{ a.nombre }}</p>
        <p><strong>Correo:</strong> {{ a.correo }}</p>
        <p><strong>Mensaje:</strong> {{ a.mensaje }}</p>

        <p>
          <strong>Estado:</strong>
          <span [class]="a.estado">{{ a.estado }}</span>
        </p>

        <div class="acciones">
          <button *ngIf="a.estado === 'pendiente'" (click)="responder(a.id, 'aprobado')">
            Aprobar
          </button>
          <button *ngIf="a.estado === 'pendiente'" (click)="responder(a.id, 'rechazado')">
            Rechazar
          </button>
          <button *ngIf="a.estado === 'aprobado'" (click)="responder(a.id, 'realizado')">
            Marcar como realizado
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="vista === 'perfil'" class="perfil-container">
      <h2>Mi Perfil</h2>

      <div class="foto-container">
        <img [src]="perfil.photo || 'assets/img/default-user.png'" class="foto-perfil" />
        <label class="btn-foto">
          Cambiar foto
          <input type="file" accept="image/*" (change)="subirFoto($event)" />
        </label>
      </div>

      <form (ngSubmit)="guardarPerfil()" class="formulario">
        <label>Nombre</label>
        <input type="text" [(ngModel)]="perfil.name" name="nombre" required />

        <label>Especialidad</label>
        <input
          type="text"
          [(ngModel)]="perfil.specialty"
          name="specialty"
          placeholder="Ej: Angular, Backend, IA"
        />

        <label>Descripci√≥n</label>
        <textarea [(ngModel)]="perfil.description" name="description" rows="4"></textarea>

        <label>GitHub</label>
        <input type="text" [(ngModel)]="perfil.github" name="github" />

        <label>LinkedIn</label>
        <input type="text" [(ngModel)]="perfil.linkedin" name="linkedin" />

        <label>Instagram</label>
        <input type="text" [(ngModel)]="perfil.instagram" name="instagram" />

        <label>Sitio Web</label>
        <input type="text" [(ngModel)]="perfil.website" name="website" />

        <button type="submit" class="btn-guardar">Guardar cambios</button>
      </form>
    </div>
  </div>
</div>
